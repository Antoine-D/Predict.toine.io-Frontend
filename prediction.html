
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../favicon.ico">

    <title>Narrow Jumbotron Template for Bootstrap</title>

    <link href="../assets/css/bootstrap.min.css" rel="stylesheet">
    <link href="../assets/css/custom.css" rel="stylesheet">
</head>

<body>

    <style>
        #prediction-result h4 {
            text-align: left;
        }

        .prediction-active {
            color: #286090;
        }

        .prediction-true {
            color: #53B981;
        }

        .prediction-false {
            color: red;
        }
    </style>
    <div class="container">
        <div class="jumbotron">
            <div id="prediction-result" class="prediction-active">
                <h2>Prediction is still valid.</h2>
                <h4>Last checked on 10/8/2015 at 9:36am when the price was $92.77. Prediction's endtime is on 10/8/2015 at 4:55pm.</h4>
            </div>
            <!--<div class="prediction-result">
                <h2>Prediction is still valid.</h2>
                <h4>Last checked on 10/8/2015 at 9:36am when the price was $92.77. Prediction's endtime is on 10/8/2015 at 4:55pm.</h4>
            </div>
            <div class="prediction-result prediction-false">
                <h2>Prediction proved false.</h2>
                <h4>AAPL price didn't reach above $100.00 by the end time of the prediction. The last price check was on 10/8/2015 at 4:55pm when the price was $99.87.</h4>
            </div>
            <div class="prediction-result prediction-true">
                <h2>Prediction proved true.</h2>
                <h4>AAPL price reached above $100.00 before the end time of the prediction. The last price check was on 10/8/2015 at 11:55am when the price was $100.87.</h4>
            </div>-->

        </div>

        <footer>
            <hr>
            <p class="col-lg-6">
                <span style="background-color: #53B981;" class="badge">
                    <a style="color: white;" href="/.">Home</a>
                </span>
                </span>
                <span style="background-color: #53B981;" class="badge">
                    <a style="color: white;" href="create">Create</a>
                </span>
                </span>
            </p>
            <p class="col-lg-6" id="copyright-notice">&copy; <a class="a-custom" href="http://www.antoinedahan.com">Antoine Dahan </a>
            <script>
              document.getElementById("copyright-notice").innerHTML += 
                (new Date()).getFullYear().toString();
            </script>
        </footer>
    </div> <!-- /container -->

</body>

<script src="../assets/js/jquery-1.11.3.min.js"></script>
<script src="http://code.highcharts.com/highcharts.js"></script>
<script src="http://code.highcharts.com/modules/exporting.js"></script>
<script src="../assets/js/shared.js"></script>

<script>
    $(document).ready(function () {

        var setPredictionInfo = function() {
            var thisUrl = window.location.href;
            var predictionId = thisUrl.substring(thisUrl.indexOf('prediction/') + 
                "prediction/".length);
            var predictionsEndpoint = "http://104.131.219.239:3060/predictions?id=";
            predictionsEndpoint += predictionId.toString();
            var xmlhttp = new XMLHttpRequest();
            xmlhttp.open("GET", predictionsEndpoint, true);
            xmlhttp.onreadystatechange=function() {
                // if the status is correct, attempt to parse the response as an object
                if(xmlhttp.readyState==4 && xmlhttp.status==200) {
                    var rawPredictions = xmlhttp.responseText;
                    var predictions = JSON.parse(rawPredictions);
                    if(predictions.length >= 1) {
                        var thisPrediction = predictions[0];
                        console.log(predictions[0]);
                        var predictionEndDate = new Date(0);
                        predictionEndDate.setSeconds(parseInt(thisPrediction.end));
                        var humanPredictionEndTime = getHumanReadableTime(predictionEndDate);
                        console.log(humanPredictionEndTime);
                    }
                }
            }

            xmlhttp.send();
        }

        setPredictionInfo();
    });
</script>
</html>
